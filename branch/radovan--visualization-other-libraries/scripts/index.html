

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scripts &mdash; Python for Scientific Computing  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Packaging" href="../packaging/" />
    <link rel="prev" title="Data visualization with Matplotlib" href="../data-visualization/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../" class="icon icon-home" alt="Documentation Home"> Python for Scientific Computing
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python/">Introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../numpy/">NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-visualization/">Data visualization with Matplotlib</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-scripts">Why scripts?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-jupyter-notebooks-to-python-scripts">From jupyter notebooks to python scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#save-as-python-script">Save as python script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-a-python-script">Run a python script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#synchronize-with-jupytext">Synchronize with Jupytext</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generalize-your-python-script">Generalize your python script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#importing-other-python-files">Importing other python files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameterize-your-inputs">Parameterize your inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-arguments-with-sys-argv">Command line arguments with <cite>sys.argv</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#parsing-command-line-arguments-with-argparse">Parsing command line arguments with <cite>argparse</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packaging/">Packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scipy/">SciPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas/">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/">Library ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependency management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binder/">Binder</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/">Software installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s guide</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Python for Scientific Computing</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
        
      <li>Scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/AaltoSciComp/python-for-scicomp/blob/master/scripts.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scripts">
<h1>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h1>
<div class="admonition-questions questions admonition">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>Why moving from Jupyter notebooks to scripts?</p></li>
<li><p>How to create a python script?</p></li>
<li><p>How to generalize a python script?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Learn how to streamline your python notebooks by creating repeatable python scripts</p></li>
<li><p>Learn how to import other python files</p></li>
<li><p>Learn to parse command line arguments in python</p></li>
</ul>
</div>
<div class="section" id="why-scripts">
<h2>Why scripts?<a class="headerlink" href="#why-scripts" title="Permalink to this headline">¶</a></h2>
<p>So far we have been learning python using Jupyter notebook. It is very convenient: it allowed us to experiment and prototype python code so we may think that is more than enough for your day to day work.</p>
<p>But after several weeks of hard work with python, you may end up:</p>
<ul class="simple">
<li><p>either with 10 different notebooks (so that you can run them concurrently)</p></li>
<li><p>or with a very long notebook which is becoming hardly readable!</p></li>
</ul>
<p>Let’s imagine you have created 10 notebooks to run for 10 different input parameters and now you are willing to experiment with 1000 sets of input parameters.
Suppose you find a bug in the original notebook and need to rerun everything: are you willing to re-create manually your 1000 notebooks?</p>
<p>In this episode, we will learn how to automate your work using python scripts so that you do not need to configure manually your notebooks to be able to run with different parameters.</p>
</div>
<div class="section" id="from-jupyter-notebooks-to-python-scripts">
<h2>From jupyter notebooks to python scripts<a class="headerlink" href="#from-jupyter-notebooks-to-python-scripts" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="save-as-python-script">
<h2>Save as python script<a class="headerlink" href="#save-as-python-script" title="Permalink to this headline">¶</a></h2>
<p>Jupyter notebooks can be parameterized for instance using <a class="reference external" href="https://papermill.readthedocs.io/en/latest/">papermill</a>. It can be an attractive approach when you have short notebooks (to generate automatically plots/reports) but as soon as you have more complex tasks to execute, we strongly recommend to generate python scripts. This will also force you to modularize your code.</p>
<p>Within JupyterLab, you can export any jupyter notebook to a python script:</p>
<img alt="https://jupyterlab.readthedocs.io/en/stable/_images/exporting_menu.png" src="https://jupyterlab.readthedocs.io/en/stable/_images/exporting_menu.png" />
<p>Actually, you could also export your notebook in many other formats. Check <a class="reference external" href="https://jupyterlab.readthedocs.io/en/stable/user/export.html">JupyterLab documentation</a> for more information.</p>
<div class="admonition-challenge challenge admonition">
<p class="admonition-title">Challenge</p>
<ol class="arabic simple">
<li><p>Download the <a class="reference external" href="https://raw.githubusercontent.com/swcarpentry/python-novice-inflammation/gh-pages/data/inflammation-01.csv">first dataset</a> in your working area.</p></li>
<li><p>Create a fresh jupyter notebook, read (for instance using <cite>loadtxt</cite> from <cite>numpy</cite>) and plot the dataset (you may simply use <cite>imshow</cite> from <cite>matplotlib.pyplot</cite>).</p></li>
<li><p>Rename your notebook to a meaningful name; for instance <strong>plot_inflammation.ipynb</strong></p></li>
<li><p>Export your notebook as a python script and check that you have a new file called <strong>plot_inflammation.py</strong> in your working directory.</p></li>
<li><p>Open a Terminal and navigate to the folder where you have exported your notebook to run it</p></li>
</ol>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">plot_inflammation</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="run-a-python-script">
<h2>Run a python script<a class="headerlink" href="#run-a-python-script" title="Permalink to this headline">¶</a></h2>
<p>TODO: Explain how to create a script with <cite>#!</cite>  to run it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_inflammation</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="synchronize-with-jupytext">
<h2>Synchronize with Jupytext<a class="headerlink" href="#synchronize-with-jupytext" title="Permalink to this headline">¶</a></h2>
<p><cite>jupytext &lt;https://jupytext.readthedocs.io/en/latest/&gt;`_</cite> is a python package you can use for automatically synchronizing your notebooks into python scripts.</p>
<p>To install it from the command line (make sure you use JupyterLab 2.x):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">jupytext</span> <span class="o">--</span><span class="n">upgrade</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">jupytext</span>
</pre></div>
</div>
<p>Please note that you may also use <a class="reference external" href="https://docs.anaconda.com/anaconda/navigator/tutorials/manage-packages/">Anaconda navigator</a> (if installed) to install <cite>jupytext</cite>.</p>
<p>Installing Jupytext will trigger a build of the JupyterLab extension the next time you open it. If you prefer, you can trigger the build manually with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">lab</span> <span class="n">build</span>
</pre></div>
</div>
<p>Once installed, you can pair your notebook (select <cite>pair notebook with percent script</cite>).</p>
<img alt="https://raw.githubusercontent.com/mwouts/jupytext/master/packages/labextension/jupytext_commands.png" src="https://raw.githubusercontent.com/mwouts/jupytext/master/packages/labextension/jupytext_commands.png" />
</div>
<div class="section" id="generalize-your-python-script">
<h2>Generalize your python script<a class="headerlink" href="#generalize-your-python-script" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="importing-other-python-files">
<h2>Importing other python files<a class="headerlink" href="#importing-other-python-files" title="Permalink to this headline">¶</a></h2>
<p>To avoid having large notebook/scripts, it is recommended to organize your python code in modules.</p>
<p>For instance, it is good practice to only keep plotting (or report generation) in a notebook/script and separate data analysis from it.</p>
<p><strong>Example</strong></p>
<p>TODO: show an example where we create a module that we import in the python script.</p>
</div>
<div class="section" id="parameterize-your-inputs">
<h2>Parameterize your inputs<a class="headerlink" href="#parameterize-your-inputs" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="command-line-arguments-with-sys-argv">
<h2>Command line arguments with <cite>sys.argv</cite><a class="headerlink" href="#command-line-arguments-with-sys-argv" title="Permalink to this headline">¶</a></h2>
<p><strong>Example</strong></p>
<p>We create a python script to sum two integers and print the result. The two integers are passed as arguments.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-command-line-arguments-with-argparse">
<h2>Parsing command line arguments with <cite>argparse</cite><a class="headerlink" href="#parsing-command-line-arguments-with-argparse" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="c1"># help flag provides flag help</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;output filename&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">output</span><span class="p">:</span>
           <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is the name of the output file&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-challenge challenge admonition">
<p class="admonition-title">Challenge</p>
<ol class="arabic simple">
<li><p>Take the python script we have written in the preceding exercise and use
<cite>argparse</cite> to be able to read any input file and save the resulting image in an output file (filename is specified via command line argument).</p></li>
</ol>
</div>
<div class="admonition-keypoints keypoints admonition">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>synchronize your jupyter notebooks &amp; python scripts with <cite>jupytext</cite></p></li>
<li><p><cite>import</cite> other python files</p></li>
<li><p>command line arguments in python scripts</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../packaging/" class="btn btn-neutral float-right" title="Packaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../data-visualization/" class="btn btn-neutral float-left" title="Data visualization with Matplotlib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, The contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>